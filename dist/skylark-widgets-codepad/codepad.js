/**
 * skylark-widgets-codepad - The skylark code playground widget for showcasing html/css/js.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-codepad/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-widgets-base/widget","skylark-domx-styler","skylark-domx-data","skylark-domx-noder","./util","./template","./addons"],function(s,a,t,n,i,l,e,r,d){"use strict";class o extends t{get klassName(){return"Codepad"}get pluginName(){return"lark.Codepad"}get options(){return{files:[],showBlank:!1,runScripts:!0,pane:"result",debounce:250,addons:{general:["render"]}}}_init(){var s,t=this.options,e=(!1===t.runScripts&&t.addons.gerneral.push("scriptless"),super._init(),this._cached={html:null,css:null,js:null},this.$container=this._elm,this._paneActive=t.pane);this._velm.html(r.container()).addClass(r.containerClass()).addClass(r.paneActiveClass(e)).on("change",a.debounce(this.change.bind(this),t.debounce)).on("click",this.pane.bind(this)),this._$status={};for(s of["html","css","js"])!1!==this.options.codes[s]&&this._markup(s);this._setCodes(this.options.codes)}_startup(){var s=this.options;if(this.paneActive=this._paneActive,s.showBlank)for(var t of["html","css","js"])this._velm.addClass(r.hasFileClass(t))}_markup(s){var t=this._elm,e=this.$().find(".codepad-pane-"+s);e.append(l.createElement("div",{innerHTML:r.editorContent(s),className:r.editorClass(s)})),this._$status[s]=e.find(".codepad-status"),n.addClass(t,r.hasFileClass(s))}_load(s){var t=this._cached[s]||{},t=a.isString(t)?t:t.content||"";this.$(`.codepad-pane-${s} textarea`).val(t)}change(s){var t,e=i.data(s.target,"codepad-type");e&&(t=this._cached)[e]!==s.target.value&&(t[e]=s.target.value,this.emit("changed",{type:e,file:i.data(s.target,"codepad-file"),content:t[e]}))}getCodes(){return a.clone(this._cached)}_setCodes(s){var t,e=this._cached;e.html=s.html||null,e.css=s.css||null,e.js=s.js||null;for(t of["html","css","js"])this._load(t)}resetCodes(s){return this._setCodes(s),this.emit("reseted"),this}errors(s,t){this.status("error",s,t)}pane(s){var t,e;i.data(s.target,"codepad-type")&&(t=this._paneActive,e=this._paneActive=i.data(s.target,"codepad-type"),this.elmx().removeClass(r.paneActiveClass(t)).addClass(r.paneActiveClass(e)),s.preventDefault())}status(s="error",t=[],e={}){if(!t.length)return this.clearStatus(s,e);var a=this._get("$status"),i=(n.addClass(a[e.type],r.statusClass(s)),n.addClass(this._elm,r.statusActiveClass(e.type)),"");t.forEach(function(s){i+=r.statusMessage(s)}),a[e.type].innerHTML=i}clearStatus(s,t){var e=this._get("$status");n.removeClass(e[t.type],r.statusClass(s)),n.removeClass(this._elm,r.statusActiveClass(t.type)),e[t.type].innerHTML=""}}return o.addons=d,s.attach("widgets.Codepad",o)});
//# sourceMappingURL=sourcemaps/codepad.js.map
