{"version":3,"sources":["addons/js/coffeescript.js"],"names":["define","langx","Addon","util","CodeGround","AddonCoffeeScript","_init","super","coder","this","options","window","CoffeeScript","$","html","listenTo","update","isCoffee","params","type","file","indexOf","e","data","content","compile","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,cACA,aACA,iBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBACMC,UAA2BH,EAG7BI,QACIC,MAAMD,MAAM,EACZ,IAAIE,EAAQC,KAAKD,MACHC,KAAKC,QAGgB,KAAA,IAAxBC,OAAOC,eAGlBJ,EAAMK,EAAE,2BAA2B,EAAEC,KAAK,cAAc,EACxDL,KAAKM,SAASP,EAAM,UAAUC,KAAKO,MAAM,EAC7C,CACAC,SAASC,GACL,MAAoB,OAAhBA,EAAOC,OAG+B,CAAC,IAApCD,EAAOE,KAAKC,QAAQ,SAAS,GAA4B,KAAhBH,EAAOE,KAC3D,CACAJ,OAAOM,GACCJ,EAASI,EAAEC,KACf,GAAId,KAAKQ,SAASC,CAAM,EACpB,IACIA,EAAOM,QAAUb,OAAOC,aAAaa,QAAQP,EAAOM,OAAO,CAG/D,CAFE,MAAOE,GACL,OAAOC,SAASD,EAAKR,CAAM,CAC/B,CAGR,CAEAU,0BACI,MAAO,IACX,CAEAC,uBACI,MAAO,cACX,CAEJ,CAIA,OAFAxB,EAAkByB,SAAS1B,CAAU,EAE9BC,CACX,CAAC","file":"../../../addons/js/coffeescript.js","sourcesContent":["define([\r\n    'skylark-langx/langx',\r\n    \"../../addon\",\r\n    '../../util',\r\n    \"../../codepad\"\r\n], function (langx,Addon,util,CodeGround) {\r\n    'use strict';\r\n    class AddonCoffeeScript  extends Addon{\r\n        //constructor(coder, options) \r\n\r\n        _init() {\r\n            super._init();\r\n            var coder = this.coder,\r\n                options = this.options;\r\n            \r\n            var priority = 20;\r\n            if (typeof window.CoffeeScript === 'undefined') {\r\n                return;\r\n            }\r\n            coder.$('a[data-codepad-type=\"js\"]').html('CoffeeScript');\r\n            this.listenTo(coder,\"changed\",this.update);\r\n        }\r\n        isCoffee(params) {\r\n            if (params.type !== 'js') {\r\n                return false;\r\n            }\r\n            return params.file.indexOf('.coffee') !== -1 || params.file === '';\r\n        }\r\n        update(e) {\r\n            var params = e.data;\r\n            if (this.isCoffee(params)) {\r\n                try {\r\n                    params.content = window.CoffeeScript.compile(params.content);\r\n                } catch (err) {\r\n                    return callback(err, params);\r\n                }\r\n            }\r\n            //callback(null, params);\r\n        }\r\n\r\n        static get categoryName() {\r\n            return \"js\";\r\n        }\r\n\r\n        static get addonName(){\r\n            return \"coffeescript\";\r\n        }\r\n\r\n    };\r\n\r\n    AddonCoffeeScript.register(CodeGround);\r\n\r\n    return AddonCoffeeScript;\r\n});"]}