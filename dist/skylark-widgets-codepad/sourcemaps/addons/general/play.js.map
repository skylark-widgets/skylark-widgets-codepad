{"version":3,"sources":["addons/general/play.js"],"names":["define","langx","noder","eventer","$","Addon","util","CodeGround","AddonPlay","options","firstRun","_init","super","coder","this","cache","$button","html","type","content","css","js","prop","className","innerHTML","append","listenTo","run","update","code","e","params","data","clone","forceRender","emit","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,qBACA,uBACA,qBACA,cACA,aACA,iBACD,SAAUC,EAAMC,EAAMC,EAAQC,EAAEC,EAAMC,EAAKC,SACpCC,UAAmBH,EAGrBI,cACI,MAAO,CACJC,SAAU,CAAA,CACb,CACJ,CAEAC,QACIC,MAAMD,MAAM,EAEZ,IAAIE,EAAQC,KAAKD,MAIbE,EAAQ,GAkBRC,GAhBqB,CAAA,IALXF,KAAKL,QAKPC,WACRK,EAAQ,CACJE,KAAM,CACFC,KAAM,OACNC,QAAS,EACb,EACAC,IAAK,CACDF,KAAM,MACNC,QAAS,EACb,EACAE,GAAI,CACAH,KAAM,KACNC,QAAS,EACb,CACJ,GAEUf,EAAE,WAAW,EAAEkB,KAAK,CAC9BC,UAAY,qCACZC,UAAY,KAChB,CAAC,GAEDX,EAAMT,EAAE,EAAEqB,OAAOT,CAAO,EAExBF,KAAKY,SAASV,EAAQ,QAAQF,KAAKa,GAAG,EAEtCb,KAAKY,SAASb,EAAM,UAAUC,KAAKc,MAAM,EAEzCd,KAAKC,MAAQA,EACbD,KAAKe,KA7BM,GA8BXf,KAAKD,MAAQA,CACjB,CAEAe,OAAOE,GACCC,EAASD,EAAEE,KACflB,KAAKe,KAAKE,EAAOb,MAAQjB,EAAMgC,MAAMF,CAAM,EACJ,KAAA,IAA5BjB,KAAKC,MAAMgB,EAAOb,MAEzBJ,KAAKC,MAAMgB,EAAOb,MAAMgB,YAAc,KAEtCpB,KAAKC,MAAMgB,EAAOb,MAAQjB,EAAMgC,MAAMF,CAAM,CAGpD,CAEAJ,MACIb,KAAKD,MAAMsB,KAAK,SAAS,CAC7B,CAEAC,0BACI,MAAO,SACX,CAEAC,uBACI,MAAO,MACX,CAEJ,CAIA,OAFA7B,EAAU8B,SAAS/B,CAAU,EAEtBC,CACX,CAAC","file":"../../../addons/general/play.js","sourcesContent":["define([\r\n    'skylark-langx/langx',\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-query\",\r\n    \"../../addon\",\r\n    '../../util',\r\n    \"../../codepad\"\r\n], function (langx,noder,eventer,$,Addon,util,CodeGround) {\r\n    class AddonPlay  extends Addon{\r\n        //constructor(coder, options) \r\n\r\n        get options() {\r\n            return {\r\n               firstRun: true \r\n            }\r\n        }\r\n\r\n        _init() {\r\n            super._init();\r\n\r\n            var coder = this.coder,\r\n                options = this.options;\r\n            \r\n            var priority = 10;\r\n            var cache = {};\r\n            var code = {};\r\n            if (options.firstRun === false) {\r\n                cache = {\r\n                    html: {\r\n                        type: 'html',\r\n                        content: ''\r\n                    },\r\n                    css: {\r\n                        type: 'css',\r\n                        content: ''\r\n                    },\r\n                    js: {\r\n                        type: 'js',\r\n                        content: ''\r\n                    }\r\n                };\r\n            }\r\n            var $button = $('<button/>').prop({\r\n                className : 'codepad-button codepad-button-play',\r\n                innerHTML : 'Run'\r\n            });\r\n\r\n            coder.$().append($button);\r\n\r\n            this.listenTo($button,\"click\",this.run);\r\n\r\n            this.listenTo(coder,\"changed\",this.update);\r\n            \r\n            this.cache = cache;\r\n            this.code = code;\r\n            this.coder = coder;\r\n        }\r\n\r\n        update(e) {\r\n            var params = e.data;\r\n            this.code[params.type] = langx.clone(params);\r\n            if (typeof this.cache[params.type] !== 'undefined') {\r\n                //callback(null, this.cache[params.type]);\r\n                this.cache[params.type].forceRender = null;\r\n            } else {\r\n                this.cache[params.type] = langx.clone(params);\r\n                //callback(null, params);\r\n            }\r\n        }\r\n\r\n        run() {\r\n            this.coder.emit('reseted');\r\n        }\r\n\r\n        static get categoryName() {\r\n            return \"general\";\r\n        }\r\n\r\n        static get addonName(){\r\n            return \"play\";\r\n        }\r\n\r\n    };\r\n\r\n    AddonPlay.register(CodeGround);\r\n\r\n    return AddonPlay;\r\n});"]}