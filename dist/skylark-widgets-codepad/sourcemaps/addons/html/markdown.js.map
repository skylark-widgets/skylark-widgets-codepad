{"version":3,"sources":["addons/html/markdown.js"],"names":["define","langx","Addon","util","CodeGround","AddonMarkdown","_init","super","coder","this","options","window","marked","setOptions","$","html","listenTo","update","e","params","data","type","content","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,cACA,aACA,iBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAuBH,EAGzBI,QACIC,MAAMD,MAAM,EAEZ,IAAIE,EAAQC,KAAKD,MACbE,EAAUD,KAAKC,QAGU,KAAA,IAAlBC,OAAOC,SAGlBD,OAAOC,OAAOC,WAAWH,CAAO,EAEhCF,EAAMM,EAAE,6BAA6B,EAAEC,KAAK,UAAU,EAEtDN,KAAKO,SAASR,EAAM,UAAUC,KAAKQ,MAAM,EAC7C,CACAA,OAAOC,GACCC,EAASD,EAAEE,KACf,GAAoB,SAAhBD,EAAOE,KACP,IACIF,EAAOG,QAAUX,OAAOC,OAAOO,EAAOG,OAAO,CAGjD,CAFE,MAAOC,GACL,OAAOC,SAASD,EAAKJ,CAAM,CAC/B,CAKR,CAEAM,0BACI,MAAO,MACX,CAEAC,uBACI,MAAO,UACX,CAEJ,CAIA,OAFArB,EAAcsB,SAASvB,CAAU,EAE1BC,CACX,CAAC","file":"../../../addons/html/markdown.js","sourcesContent":["define([\r\n    'skylark-langx/langx',\r\n    \"../../addon\",\r\n    '../../util',\r\n    \"../../codepad\"\r\n], function (langx,Addon,util,CodeGround) {\r\n    'use strict';\r\n    \r\n    class AddonMarkdown  extends Addon{\r\n        //constructor(coder, options) \r\n\r\n        _init() {\r\n            super._init();\r\n\r\n            var coder = this.coder,\r\n                options = this.options;\r\n\r\n            var priority = 20;\r\n            if (typeof window.marked === 'undefined') {\r\n                return;\r\n            }\r\n            window.marked.setOptions(options);\r\n\r\n            coder.$('a[data-codepad-type=\"html\"]').html('Markdown');\r\n\r\n            this.listenTo(coder,\"changed\",this.update);\r\n        }\r\n        update(e) {\r\n            var params = e.data;\r\n            if (params.type === 'html') {\r\n                try {\r\n                    params.content = window.marked(params.content);\r\n                } catch (err) {\r\n                    return callback(err, params);\r\n                }\r\n                //callback(null, params);\r\n            } else {\r\n                //callback(null, params);\r\n            }\r\n        }\r\n\r\n        static get categoryName() {\r\n            return \"html\";\r\n        }\r\n\r\n        static get addonName(){\r\n            return \"markdown\";\r\n        }\r\n\r\n    };\r\n\r\n    AddonMarkdown.register(CodeGround);\r\n\r\n    return AddonMarkdown;\r\n});"]}