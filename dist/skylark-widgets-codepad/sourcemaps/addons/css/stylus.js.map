{"version":3,"sources":["addons/css/stylus.js"],"names":["define","langx","Addon","util","CodeGround","AddonStylus","_init","super","coder","this","options","window","stylus","$","html","listenTo","update","isStylus","params","type","file","indexOf","e","data","content","render","err","res","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,cACA,aACA,iBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAE1B,mBAEMC,UAAqBH,EAGvBI,QACIC,MAAMD,MAAM,EACZ,IAAIE,EAAQC,KAAKD,MACHC,KAAKC,QAGU,KAAA,IAAlBC,OAAOC,SAGlBJ,EAAMK,EAAE,4BAA4B,EAAEC,KAAK,QAAQ,EACnDL,KAAKM,SAASP,EAAM,UAAUC,KAAKO,MAAM,EAC7C,CACAC,SAASC,GACL,MAAoB,QAAhBA,EAAOC,OAG6B,CAAC,IAAlCD,EAAOE,KAAKC,QAAQ,OAAO,GAA4B,KAAhBH,EAAOE,KACzD,CAEAJ,OAAOM,GACH,IAAIJ,EAASI,EAAEC,KACXd,KAAKQ,SAASC,CAAM,GACpBP,OAAOC,OAAOM,EAAOM,QAASf,KAAKC,OAAO,EAAEe,OAAO,CAACC,EAAKC,KACrD,GAAID,EACA,OAAOE,SAASF,EAAKR,CAAM,EAE3BA,EAAOM,QAAUG,CAGzB,CAAC,CAIT,CAEAE,0BACI,MAAO,KACX,CAEAC,uBACI,MAAO,QACX,CAEJ,CAIA,OAFAzB,EAAY0B,SAAS3B,CAAU,EAExBC,CACX,CAAC","file":"../../../addons/css/stylus.js","sourcesContent":["define([\r\n    'skylark-langx/langx',\r\n    \"../../addon\",\r\n    '../../util',\r\n    \"../../codepad\"\r\n], function (langx,Addon,util,CodeGround) {\r\n\r\n    'use strict';\r\n    \r\n    class AddonStylus  extends Addon{\r\n        //constructor(coder, options) \r\n\r\n        _init() {\r\n            super._init();\r\n            var coder = this.coder,\r\n                options = this.options;\r\n\r\n            var priority = 20;\r\n            if (typeof window.stylus === 'undefined') {\r\n                return;\r\n            }\r\n            coder.$('a[data-codepad-type=\"css\"]').html('Stylus');\r\n            this.listenTo(coder,\"changed\",this.update);\r\n        }\r\n        isStylus(params) {\r\n            if (params.type !== 'css') {\r\n                return false;\r\n            }\r\n            return params.file.indexOf('.styl') !== -1 || params.file === '';\r\n        }\r\n\r\n        update(e) {\r\n            var params = e.data;\r\n            if (this.isStylus(params)) {\r\n                window.stylus(params.content, this.options).render((err, res) => {\r\n                    if (err) {\r\n                        return callback(err, params);\r\n                    } else {\r\n                        params.content = res;\r\n                    }\r\n                    //callback(null, params);\r\n                });\r\n            } else {\r\n                //callback(null, params);\r\n            }\r\n        }\r\n\r\n        static get categoryName() {\r\n            return \"css\";\r\n        }\r\n\r\n        static get addonName(){\r\n            return \"stylus\";\r\n        }\r\n        \r\n    };\r\n\r\n    AddonStylus.register(CodeGround);\r\n\r\n    return AddonStylus;\r\n});"]}