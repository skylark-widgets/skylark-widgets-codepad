{"version":3,"sources":["addons/css/less.js"],"names":["define","langx","Addon","util","CodeGround","AddonLess","_init","super","coder","this","options","window","less","$","html","listenTo","update","isLess","params","type","file","indexOf","e","data","render","content","err","res","callback","css","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACA,cACA,aACA,iBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBACMC,UAAkBH,EAGpBI,QACIC,MAAMD,MAAM,EACZ,IAAIE,EAAQC,KAAKD,MACHC,KAAKC,QAIQ,KAAA,IAAhBC,OAAOC,OAGlBJ,EAAMK,EAAE,4BAA4B,EAAEC,KAAK,MAAM,EAEjDL,KAAKM,SAASP,EAAM,UAAUC,KAAKO,MAAM,EAC7C,CAEAC,OAAOC,GACH,MAAoB,QAAhBA,EAAOC,OAG6B,CAAC,IAAlCD,EAAOE,KAAKC,QAAQ,OAAO,GAA4B,KAAhBH,EAAOE,KACzD,CAEAJ,OAAOM,GACH,IAAIJ,EAASI,EAAEC,KACXd,KAAKQ,OAAOC,CAAM,GAClBP,OAAOC,KAAKY,OAAON,EAAOO,QAAShB,KAAKC,QAAS,CAACgB,EAAKC,KACnD,GAAID,EACA,OAAOE,SAASF,EAAKR,CAAM,EAE3BA,EAAOO,QAAUE,EAAIE,GAG7B,CAAC,CAIT,CAEAC,0BACI,MAAO,KACX,CAEAC,uBACI,MAAO,MACX,CACJ,CAIA,OAFA1B,EAAU2B,SAAS5B,CAAU,EAEtBC,CACX,CAAC","file":"../../../addons/css/less.js","sourcesContent":["define([\r\n    'skylark-langx/langx',\r\n    \"../../addon\",\r\n    '../../util',\r\n    \"../../codepad\"\r\n], function (langx,Addon,util,CodeGround) {\r\n    'use strict';\r\n    class AddonLess extends Addon{\r\n        //constructor(coder, options) \r\n\r\n        _init() {\r\n            super._init();\r\n            var coder = this.coder,\r\n                options = this.options;\r\n\r\n            var priority = 20;\r\n\r\n            if (typeof window.less === 'undefined') {\r\n                return;\r\n            }\r\n            coder.$('a[data-codepad-type=\"css\"]').html('Less');\r\n\r\n            this.listenTo(coder,\"changed\",this.update);\r\n        }\r\n\r\n        isLess(params) {\r\n            if (params.type !== 'css') {\r\n                return false;\r\n            }\r\n            return params.file.indexOf('.less') !== -1 || params.file === '';\r\n        }\r\n\r\n        update(e) {\r\n            var params = e.data;\r\n            if (this.isLess(params)) {\r\n                window.less.render(params.content, this.options, (err, res) => {\r\n                    if (err) {\r\n                        return callback(err, params);\r\n                    } else {\r\n                        params.content = res.css;\r\n                    }\r\n                    //callback(null, params);\r\n                });\r\n            } else {\r\n                //callback(null, params);\r\n            }\r\n        }\r\n\r\n        static get categoryName() {\r\n            return \"css\";\r\n        }\r\n\r\n        static get addonName(){\r\n            return \"less\";\r\n        }\r\n    };\r\n\r\n    AddonLess.register(CodeGround);\r\n\r\n    return AddonLess;\r\n});"]}